# FormGuard - Edge-Native Form Infrastructure Technical Overview

FormGuard is a high-performance, developer-first form backend infrastructure built on Cloudflare's Edge Network. It simplifies form management by providing instant endpoints, AI-native insights, and edge-enforced security.

## Tech Stack Summary
- **Frontend**: Next.js 15 (App Router), React 19, TailwindCSS 4, shadcn/ui.
- **Backend/Edge**: Cloudflare Workers via OpenNext, Node.js compatibility enabled.
- **Database**: Neon Postgres (Serverless) with Drizzle ORM.
- **Authentication**: StackAuth (Managed Auth).
- **Billing & Payments**: Dodo Payments (Next.js SDK integration).
- **AI Engine**: Google Gemini Pro (@google/generative-ai).
- **Runtime**: Bun (Preferred for development and installs).

## Core Architecture
- **Edge Runtime**: Most logic executes on Cloudflare Workers for global performance (<50ms submission latency).
- **Server-First Components**: Marketing and non-interactive dashboard pages are rendered as React Server Components (RSC).
- **Brutalist Design**: Minimalist, high-contrast, typography-driven UI following "Vercel-level" developer aesthetics.

## Database Schema (Drizzle ORM)
### Tables:
- `users`: Managed by StackAuth, stores user plan (free, pro, growth).
- `forms`: Contains form metadata and unique `endpoint_id`.
- `submissions`: Stores JSON payloads, IP addresses, and spam detection status.
- `insights`: Stores AI-generated summaries for batches of submissions.

## API Endpoints
### Public Endpoints:
- `POST /api/submit/:endpointId`: The primary ingest endpoint. Supports JSON and multipart/form-data.
- Handles spam filtering and rate limiting before persistence.

### Protected API (Dashboard):
- `/api/forms`: Create, list, delete forms.
- `/api/forms/:id/submissions`: Retrieve form data.
- `/api/forms/:id/insight`: Trigger Gemini AI processing for recent submissions.

### Webhooks:
- `/api/webhook/dodo`: Handles subscription lifecycle events (payment.succeeded, subscription.created, etc.).

## Development & Setup
### Environment Variables:
Required keys in `.env`:
- `NEXT_PUBLIC_STACK_PROJECT_ID`: StackAuth Project ID.
- `STACK_SECRET_SERVER_KEY`: StackAuth Server Key.
- `DATABASE_URL`: Neon Postgres connection string.
- `GEMINI_API_KEY`: Google AI Studio key.
- `DODO_PAYMENTS_API_KEY`: Dodo Payments API key.
- `DODO_PAYMENTS_WEBHOOK_SECRET`: For validating incoming webhooks.

### Commands:
- `bun install`: Install dependencies.
- `bun dev`: Start Next.js development server.
- `bun run deploy`: Build with OpenNext and deploy to Cloudflare Workers.
- `npx tsc --noEmit`: Run type checks.

## Key Files for AI Understanding
- `src/db/schema.ts`: Single source of truth for the data model.
- `wrangler.jsonc`: Cloudflare configuration and bindings.
- `src/app/(landing)/page.tsx`: Core landing page layout and positioning.
- `public/llms.txt`: This file, summarizing technical context for LLMs.

## Positioning & Messaging
FormGuard is not just a "form tool"; it is **infrastructure**. Every part of the codebase should reflect durability, security, and developer-first utility.
- No heavy animations or unnecessary client-side JS.
- Works with plain HTML forms. No SDK required.
- Everything is "Edge-native".

## Documentation
Full documentation is available at: https://formguard.strivio.world/docs
LLM Context link: https://formguard.strivio.world/llms.txt
